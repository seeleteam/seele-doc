

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Hash Time Lock System Contract &mdash; Seele  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Command Line Options" href="Command-Line-Options.html" />
    <link rel="prev" title="Hash Time Lock Contract" href="Hash-Time-Lock-Contract.html" /> 

  
  <script src="../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Seele
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Getting-Started-With-Seele.html">Getting Started With Seele</a></li>
<li class="toctree-l1"><a class="reference internal" href="How-to-build-your-own-seele-network.html">How To Build Your Own Seele Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="Scan-Monitor-Dashboard-Setup.html">Scan Monitor Dashboard Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="Using-the-contract-simulator.html">Using The Contract Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hash-Time-Lock-Contract.html">Hash Time Lock Contract</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Hash Time Lock System Contract</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tutorial-for-hash-time-lock-htlc-system-contract">Tutorial for Hash Time Lock (HTLC) System Contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#home">Home</a></li>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#view-commands">View commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tutorial">Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#on-seele2">On seele2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-seele1">On seele1</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-seele2-1">On seele2</a></li>
<li class="toctree-l4"><a class="reference internal" href="#on-seele1-1">On seele1</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Command-Line-Options.html">Command Line Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="Command-Line-Options.html#node">Node</a></li>
<li class="toctree-l1"><a class="reference internal" href="API-Document.html">JSON RPC API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Seele-Test-net-Performance-Introduction.html">Seele TestNet Performance Introduction</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Seele</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Hash Time Lock System Contract</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../sources/docs/Hash-Time-Lock-System-Contract.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hash-time-lock-system-contract">
<h1>Hash Time Lock System Contract<a class="headerlink" href="#hash-time-lock-system-contract" title="Permalink to this headline">¶</a></h1>
<p>Please read <a class="reference external" href="https://github.com/seeleteam/labs/wiki/Hash-Time-Lock-Contract">Hash Time Lock Contract
introduction</a>
for detail.</p>
<div class="section" id="tutorial-for-hash-time-lock-htlc-system-contract">
<h2>Tutorial for Hash Time Lock (HTLC) System Contract<a class="headerlink" href="#tutorial-for-hash-time-lock-htlc-system-contract" title="Permalink to this headline">¶</a></h2>
<div class="section" id="home">
<h3>Home<a class="headerlink" href="#home" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="#introduction">Introduction</a></li>
<li><a class="reference external" href="#view-commands">View Commands</a></li>
<li><a class="reference external" href="#tutorial">Tutorial</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h3>
<p>The Hash Time Lock (HTLC) System Contract is a Seele built-in contract
that supports cross-chain operations between different Seele chains or
shards. It can also be chained with any block chain that supports smart
contracts.</p>
<ul class="simple">
<li>This system contract can be used directly between different Seele
chains or shards to complete cross-chain operations; you can also use
the contract written in solidity in
<a class="reference external" href="https://github.com/seeleteam/labs">labs</a> to complete the
cross-chain operation; of course, you could also use the combination
of the two to complete the cross-chain.</li>
<li>In order for Seele and other chains that support smart contracts
(such as ETH) for cross-chain operations, you need to use the
contract in <a class="reference external" href="https://github.com/seeleteam/labs">labs</a> to complete
the cross-chain between Seele and other block chains; or Seele uses
the system contract and other chains use the contract in
<a class="reference external" href="https://github.com/seeleteam/labs">labs</a> to complete the
cross-chain.</li>
<li>This article is just a tutorial for the hash time lock system
contract, for information on how to use contract written with
solidity to complete the cross-chain please see
<a class="reference external" href="https://github.com/seeleteam/labs">labs</a></li>
</ul>
</div>
<div class="section" id="view-commands">
<h3>View commands<a class="headerlink" href="#view-commands" title="Permalink to this headline">¶</a></h3>
<p>Run: client htlc -h for help</p>
<p>Example 1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="n">htlc</span> <span class="o">-</span><span class="n">h</span>

<span class="n">NAME</span><span class="p">:</span>

   <span class="n">client</span> <span class="n">htlc</span> <span class="o">-</span> <span class="n">Hash</span> <span class="n">time</span> <span class="n">lock</span> <span class="n">contract</span> <span class="n">commands</span>



<span class="n">USAGE</span><span class="p">:</span>

   <span class="n">client</span> <span class="n">htlc</span> <span class="n">command</span> <span class="p">[</span><span class="n">command</span> <span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="n">arguments</span><span class="o">...</span><span class="p">]</span>



<span class="n">COMMANDS</span><span class="p">:</span>

     <span class="n">create</span>    <span class="n">create</span> <span class="n">HTLC</span>

     <span class="n">decode</span>    <span class="n">decode</span> <span class="n">HTLC</span> <span class="n">contract</span> <span class="n">information</span>

     <span class="n">get</span>       <span class="n">get</span> <span class="n">HTLC</span> <span class="n">information</span>

     <span class="n">key</span>       <span class="n">generate</span> <span class="n">preimage</span> <span class="n">key</span> <span class="ow">and</span> <span class="n">key</span> <span class="nb">hash</span>

     <span class="n">refund</span>    <span class="n">refund</span> <span class="kn">from</span> <span class="nn">HTLC</span>

     <span class="n">time</span>      <span class="n">generate</span> <span class="n">unix</span> <span class="n">timestamp</span>

     <span class="n">withdraw</span>  <span class="n">withdraw</span> <span class="kn">from</span> <span class="nn">HTLC</span>



<span class="n">OPTIONS</span><span class="p">:</span>

   <span class="o">--</span><span class="n">help</span><span class="p">,</span> <span class="o">-</span><span class="n">h</span>  <span class="n">show</span> <span class="n">help</span>
</pre></div>
</div>
<p>Example 2: View subcommands</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="n">htlc</span> <span class="n">create</span> <span class="o">-</span><span class="n">h</span>

<span class="n">NAME</span><span class="p">:</span>

   <span class="n">client</span> <span class="n">htlc</span> <span class="n">create</span> <span class="o">-</span> <span class="n">create</span> <span class="n">HTLC</span>



<span class="n">USAGE</span><span class="p">:</span>

   <span class="n">client</span> <span class="n">htlc</span> <span class="n">create</span> <span class="p">[</span><span class="n">command</span> <span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="n">arguments</span><span class="o">...</span><span class="p">]</span>



<span class="n">OPTIONS</span><span class="p">:</span>

   <span class="o">--</span><span class="n">address</span> <span class="n">value</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span> <span class="n">value</span>  <span class="n">address</span> <span class="k">for</span> <span class="n">client</span> <span class="n">to</span> <span class="n">request</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1:8027&quot;</span><span class="p">)</span>

   <span class="o">--</span><span class="kn">from</span> <span class="nn">value</span>               <span class="n">key</span> <span class="n">file</span> <span class="n">of</span> <span class="n">the</span> <span class="n">sender</span>

   <span class="o">--</span><span class="n">to</span> <span class="n">value</span>                 <span class="n">to</span> <span class="n">address</span>

   <span class="o">--</span><span class="n">amount</span> <span class="n">value</span>             <span class="n">amount</span> <span class="n">value</span><span class="p">,</span> <span class="n">unit</span> <span class="ow">is</span> <span class="n">fan</span>

   <span class="o">--</span><span class="n">fee</span> <span class="n">value</span>                <span class="n">transaction</span> <span class="n">fee</span>

   <span class="o">--</span><span class="n">nonce</span> <span class="n">value</span>              <span class="n">transaction</span> <span class="n">nonce</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>

   <span class="o">--</span><span class="nb">hash</span> <span class="n">value</span>               <span class="nb">hash</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">hex</span>

   <span class="o">--</span><span class="n">time</span> <span class="n">value</span>               <span class="n">time</span> <span class="n">lock</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">HTLC</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="tutorial">
<h3>Tutorial<a class="headerlink" href="#tutorial" title="Permalink to this headline">¶</a></h3>
<p>Introduction: Alice and Bob are having cross-chain operation or some
kind of transaction, Alice is the initiator on the Seele chain, Bob is
the receiver; Bob is the initiator on the seele2 chain, Alice is the
receiver. Alice and Bob need to have account on both seele1 and seele2.</p>
<ul class="simple">
<li>Alice creates a hash time lock contract on seele1</li>
<li>Bob verifies that whether the contract created by Alice conforms to
the contract based on the contract hash value and key hash value sent
by Alice.</li>
<li>If Bob approves the check, Bob creates a hash time lock on seele2
according to the key hash value sent by Alice; Otherwise, Alice takes
back the amount after the lock time expires.</li>
<li>Alice verifies that the contract created by Bob conforms to the
contract based on the hash value of the contract sent by Bob on the
seele2.</li>
<li>If Alice approves the check, then Alice gets the amount on the
seele2; otherwise, Bob takes back the amount after the lockout time
has elapsed.</li>
<li>Bob gets the private key on seele2 based on the result of after Alice
gets the amount</li>
<li>Bob gets the amount on seele1</li>
<li>If Bob or Alice does not get the amount during the lockout time,
Alice and Bob can take back the amount after the lockout time has
elapsed. #### On seele1</li>
<li><ol class="first arabic">
<li>Generate private key</li>
</ol>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>client htlc key

preimage: 0xa7e1fe2f00137100321fd2b5970cb681462a72802d0bb2e97988892326aed2c3

hash: 0xb0f8234614bb7e54e6c4ca24ff54c3319fad607af6dd18593ae5679376248e5c


Description：preimage is the private key and hash is the hash value of the private key.
</pre></div>
</div>
<ul class="simple">
<li><ol class="first arabic" start="2">
<li>Generation time, the time used to lock the transaction amount (Bob
can take the amount in the transaction as long as it can provide
preimage)</li>
</ol>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="n">htlc</span> <span class="n">time</span> <span class="o">--</span><span class="n">time</span> <span class="mi">300</span>

<span class="n">locktime</span><span class="p">:</span> <span class="mi">1536906634</span>


<span class="n">Description</span><span class="p">:</span> <span class="n">Increase</span> <span class="mi">300</span> <span class="n">seconds</span> <span class="n">to</span> <span class="n">the</span> <span class="n">current</span> <span class="n">time</span>
</pre></div>
</div>
<ul class="simple">
<li><ol class="first arabic" start="3">
<li>Alice gets the current balance for comparison</li>
</ol>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="n">getbalance</span> <span class="o">--</span><span class="n">account</span> <span class="mh">0x0a57a2714e193b7ac50475ce625f2dcfb483d741</span>

<span class="p">{</span>

        <span class="s2">&quot;Account&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0a57a2714e193b7ac50475ce625f2dcfb483d741&quot;</span><span class="p">,</span>

        <span class="s2">&quot;Balance&quot;</span><span class="p">:</span> <span class="mi">1000000000000</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><ol class="first arabic" start="4">
<li>Alice creates a Hash Time Lock (HTLC) system contract</li>
</ol>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Create</span> <span class="n">Hash</span> <span class="n">Time</span> <span class="n">Lock</span> <span class="p">(</span><span class="n">HTLC</span><span class="p">)</span> <span class="n">system</span> <span class="n">contract</span>

<span class="n">client</span> <span class="n">htlc</span> <span class="n">create</span> <span class="o">--</span><span class="kn">from</span> <span class="nn">.</span>\<span class="n">keyfile</span>\<span class="n">shard1</span><span class="o">-</span><span class="mh">0x0a57a2714e193b7ac50475ce625f2dcfb483d741</span> <span class="o">--</span><span class="n">to</span> <span class="mh">0x2a87b6504cd00af95a83b9887112016a2a991cf1</span> <span class="o">--</span><span class="n">amount</span> <span class="mi">10000000000</span> <span class="o">--</span><span class="n">fee</span> <span class="mi">10</span> <span class="o">--</span><span class="nb">hash</span> <span class="mh">0xb0f8234614bb7e54e6c4ca24ff54c3319fad607af6dd18593ae5679376248e5c</span> <span class="o">--</span><span class="n">time</span> <span class="mi">1536906634</span>

<span class="n">Please</span> <span class="nb">input</span> <span class="n">your</span> <span class="n">key</span> <span class="n">file</span> <span class="n">password</span><span class="p">:</span>

<span class="n">account</span> <span class="mh">0x0a57a2714e193b7ac50475ce625f2dcfb483d741</span> <span class="n">current</span> <span class="n">nonce</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sending</span> <span class="n">nonce</span><span class="p">:</span> <span class="mi">0</span>

<span class="p">{</span>

        <span class="s2">&quot;HashLock&quot;</span><span class="p">:</span> <span class="s2">&quot;0xb0f8234614bb7e54e6c4ca24ff54c3319fad607af6dd18593ae5679376248e5c&quot;</span><span class="p">,</span>

        <span class="s2">&quot;TimeLock&quot;</span><span class="p">:</span> <span class="mi">1536906634</span><span class="p">,</span>

        <span class="s2">&quot;Tx&quot;</span><span class="p">:</span> <span class="p">{</span>

                <span class="s2">&quot;Hash&quot;</span><span class="p">:</span> <span class="s2">&quot;0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span><span class="p">,</span>

                <span class="s2">&quot;Data&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;From&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0a57a2714e193b7ac50475ce625f2dcfb483d741&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;To&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0000000000000000000000000000000000000103&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">10000000000</span><span class="p">,</span>

                        <span class="s2">&quot;AccountNonce&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Fee&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>

                        <span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Payload&quot;</span><span class="p">:</span> <span class="s2">&quot;0x007b22486173684c6f636b223a22307862306638323334363134626237653534653663346361323466663534633333313966616436303761663664643138353933616535363739333736323438653563222c2254696d654c6f636b223a313533363930363633342c22546f223a22307832613837623635303463643030616639356138336239383837313132303136613261393931636631227d&quot;</span>

                <span class="p">},</span>

                <span class="s2">&quot;Signature&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;Sig&quot;</span><span class="p">:</span> <span class="s2">&quot;2fkr5/0qOfvrSw+UwH7Qfi2cVcYO4Gylklr8Jv7+EGhihVt6T4IAt/CPLYr88D4PlgkzxUtG0SPUBQ9JVISr4AA=&quot;</span>

                <span class="p">}</span>

        <span class="p">}</span>

<span class="p">}</span>



<span class="n">Check</span> <span class="n">the</span> <span class="n">balance</span> <span class="n">after</span> <span class="n">the</span> <span class="n">contract</span> <span class="ow">is</span> <span class="n">packaged</span> <span class="n">into</span> <span class="n">the</span> <span class="n">block</span>

<span class="n">client</span> <span class="n">getbalance</span> <span class="o">--</span><span class="n">account</span> <span class="mh">0x0a57a2714e193b7ac50475ce625f2dcfb483d741</span>

<span class="p">{</span>

        <span class="s2">&quot;Account&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0a57a2714e193b7ac50475ce625f2dcfb483d741&quot;</span><span class="p">,</span>

        <span class="s2">&quot;Balance&quot;</span><span class="p">:</span> <span class="mi">989999990990</span>

<span class="p">}</span>



<span class="n">Check</span> <span class="n">the</span> <span class="n">transaction</span> <span class="n">result</span> <span class="n">after</span> <span class="n">the</span> <span class="n">contract</span> <span class="ow">is</span> <span class="n">packaged</span> <span class="n">into</span> <span class="n">the</span> <span class="n">block</span><span class="o">.</span>

<span class="n">client</span> <span class="n">getreceipt</span> <span class="o">--</span><span class="nb">hash</span> <span class="mh">0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf</span>



<span class="p">{</span>

        <span class="s2">&quot;contract&quot;</span><span class="p">:</span> <span class="s2">&quot;0x&quot;</span><span class="p">,</span>

        <span class="s2">&quot;failed&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>

        <span class="s2">&quot;poststate&quot;</span><span class="p">:</span> <span class="s2">&quot;0x82d64f5e694e7b6382f5144e2c64e05dbcaea1ae8e99e7300dccecae7f8b10d7&quot;</span><span class="p">,</span>

        <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;0x7b225478223a7b2248617368223a22307863353265633833646437633131356434656434396361393038666362626334623164386633643064656430343330656431323463666161376433626335646166222c2244617461223a7b2246726f6d223a22307830613537613237313465313933623761633530343735636536323566326463666234383364373431222c22546f223a22307830303030303030303030303030303030303030303030303030303030303030303030303030313033222c22416d6f756e74223a31303030303030303030302c224163636f756e744e6f6e6365223a302c22466565223a31302c2254696d657374616d70223a302c225061796c6f6164223a2230783030376232323438363137333638346336663633366232323361323233303738363233303636333833323333333433363331333436323632333736353335333436353336363333343633363133323334363636363335333436333333333333313339363636313634333633303337363136363336363436343331333833353339333336313635333533363337333933333337333633323334333836353335363332323263323235343639366436353463366636333662323233613331333533333336333933303336333633333334326332323534366632323361323233303738333236313338333736323336333533303334363336343330333036313636333933353631333833333632333933383338333733313331333233303331333636313332363133393339333136333636333132323764227d2c225369676e6174757265223a7b22536967223a2232666b72352f30714f66767253772b5577483751666932635663594f3447796c6b6c72384a76372b454768696856743654344941742f43504c597238384434506c676b7a78557447305350554251394a564953723441413d227d7d2c22486173684c6f636b223a22307862306638323334363134626237653534653663346361323466663534633333313966616436303761663664643138353933616535363739333736323438653563222c2254696d654c6f636b223a313533363930363633342c22546f223a22307832613837623635303463643030616639356138336239383837313132303136613261393931636631222c22526566756e646564223a66616c73652c2257697468647261776564223a66616c73652c22507265696d616765223a22227d&quot;</span><span class="p">,</span>

        <span class="s2">&quot;totalFee&quot;</span><span class="p">:</span> <span class="mi">9010</span><span class="p">,</span>

        <span class="s2">&quot;txhash&quot;</span><span class="p">:</span> <span class="s2">&quot;0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span><span class="p">,</span>

        <span class="s2">&quot;usedGas&quot;</span><span class="p">:</span> <span class="mi">100000</span>

<span class="p">}</span>





<span class="n">Decode</span> <span class="n">the</span> <span class="n">result</span> <span class="n">field</span>


<span class="n">client</span> <span class="n">htlc</span> <span class="n">decode</span> <span class="o">--</span><span class="n">payload</span> <span class="mh">0x7b225478223a7b2248617368223a22307863353265633833646437633</span> <span class="mi">131356434656434396361393038666362626334623164386633643064656430343330656431323463666161376433626335646166222</span><span class="n">c2244617461223a7b2246726f6d223a22307830613537613237313465313933623761633530343735636536323566326463666234383364373431222c22546f223a22307830303030303030303030303030303030303030303030303030303030303030303030303030313033222c22416d6f756e74223a31303030303030303030302c224163636f756e744e6f6e6365223a302c22466565223a31302c2254696d657374616d70223a302c225061796c6f6164223a2230783030376232323438363137333638346336663633366232323361323233303738363233303636333833323333333433363331333436323632333736353335333436353336363333343633363133323334363636363335333436333333333333313339363636313634333633303337363136363336363436343331333833353339333336313635333533363337333933333337333633323334333836353335363332323263323235343639366436353463366636333662323233613331333533333336333933303336333633333334326332323534366632323361323233303738333236313338333736323336333533303334363336343330333036313636333933353631333833333632333933383338333733313331333233303331333636313332363133393339333136333636333132323764227d2c225369676e6174757265223a7b22536967223a2232666b72352f30714f66767253772b5577483751666932635663594f3447796c6b6c72384a76372b454768696856743654344941742f43504c597238384434506c676b7a78557447305350554251394a564953723441413d227d7d2c22486173684c6f636b223a22307862306638323334363134626237653534653663346361323466663534633333313966616436303761663664643138353933616535363739333736323438653563222c2254696d654c6f636b223a313533363930363633342c22546f223a22307832613837623635303463643030616639356138336239383837313132303136613261393931636631222c22526566756e646564223a66616c73652c2257697468647261776564223a66616c73652c22507265696d616765223a22227d</span>

<span class="p">{</span>

        <span class="s2">&quot;Tx&quot;</span><span class="p">:</span> <span class="p">{</span>

                <span class="s2">&quot;Hash&quot;</span><span class="p">:</span> <span class="s2">&quot;0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span><span class="p">,</span>

                <span class="s2">&quot;Data&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;From&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0a57a2714e193b7ac50475ce625f2dcfb483d741&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;To&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0000000000000000000000000000000000000103&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">10000000000</span><span class="p">,</span>

                        <span class="s2">&quot;AccountNonce&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Fee&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>

                        <span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Payload&quot;</span><span class="p">:</span> <span class="s2">&quot;0x007b22486173684c6f636b223a22307862306638323334363134626237653534653663346361323466663534633333313966616436303761663664643138353933616535363739333736323438653563222c2254696d654c6f636b223a313533363930363633342c22546f223a22307832613837623635303463643030616639356138336239383837313132303136613261393931636631227d&quot;</span>

                <span class="p">},</span>

                <span class="s2">&quot;Signature&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;Sig&quot;</span><span class="p">:</span> <span class="s2">&quot;2fkr5/0qOfvrSw+UwH7Qfi2cVcYO4Gylklr8Jv7+EGhihVt6T4IAt/CPLYr88D4PlgkzxUtG0SPUBQ9JVISr4AA=&quot;</span>

                <span class="p">}</span>

        <span class="p">},</span>

        <span class="s2">&quot;HashLock&quot;</span><span class="p">:</span> <span class="s2">&quot;0xb0f8234614bb7e54e6c4ca24ff54c3319fad607af6dd18593ae5679376248e5c&quot;</span><span class="p">,</span>

        <span class="s2">&quot;TimeLock&quot;</span><span class="p">:</span> <span class="mi">1536906634</span><span class="p">,</span>

        <span class="s2">&quot;To&quot;</span><span class="p">:</span> <span class="s2">&quot;0x2a87b6504cd00af95a83b9887112016a2a991cf1&quot;</span><span class="p">,</span>

        <span class="s2">&quot;Refunded&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>

        <span class="s2">&quot;Withdrawed&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>

        <span class="s2">&quot;Preimage&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>5.Bob uses the hash value of the hash time lock system contract sent
by Alice and the hash value of the private key to see if Alice’s
contract created on the seele1 meets the agreement of both parties.</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Check</span> <span class="n">the</span> <span class="n">transaction</span> <span class="n">result</span> <span class="n">after</span> <span class="n">the</span> <span class="n">contract</span> <span class="ow">is</span> <span class="n">packaged</span> <span class="n">into</span> <span class="n">the</span> <span class="n">block</span><span class="o">.</span>

<span class="n">client</span> <span class="n">getreceipt</span> <span class="o">--</span><span class="nb">hash</span> <span class="mh">0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf</span>



<span class="p">{</span>

        <span class="s2">&quot;contract&quot;</span><span class="p">:</span> <span class="s2">&quot;0x&quot;</span><span class="p">,</span>

        <span class="s2">&quot;failed&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>

        <span class="s2">&quot;poststate&quot;</span><span class="p">:</span> <span class="s2">&quot;0x82d64f5e694e7b6382f5144e2c64e05dbcaea1ae8e99e7300dccecae7f8b10d7&quot;</span><span class="p">,</span>

        <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;0x7b225478223a7b2248617368223a22307863353265633833646437633131356434656434396361393038666362626334623164386633643064656430343330656431323463666161376433626335646166222c2244617461223a7b2246726f6d223a22307830613537613237313465313933623761633530343735636536323566326463666234383364373431222c22546f223a22307830303030303030303030303030303030303030303030303030303030303030303030303030313033222c22416d6f756e74223a31303030303030303030302c224163636f756e744e6f6e6365223a302c22466565223a31302c2254696d657374616d70223a302c225061796c6f6164223a2230783030376232323438363137333638346336663633366232323361323233303738363233303636333833323333333433363331333436323632333736353335333436353336363333343633363133323334363636363335333436333333333333313339363636313634333633303337363136363336363436343331333833353339333336313635333533363337333933333337333633323334333836353335363332323263323235343639366436353463366636333662323233613331333533333336333933303336333633333334326332323534366632323361323233303738333236313338333736323336333533303334363336343330333036313636333933353631333833333632333933383338333733313331333233303331333636313332363133393339333136333636333132323764227d2c225369676e6174757265223a7b22536967223a2232666b72352f30714f66767253772b5577483751666932635663594f3447796c6b6c72384a76372b454768696856743654344941742f43504c597238384434506c676b7a78557447305350554251394a564953723441413d227d7d2c22486173684c6f636b223a22307862306638323334363134626237653534653663346361323466663534633333313966616436303761663664643138353933616535363739333736323438653563222c2254696d654c6f636b223a313533363930363633342c22546f223a22307832613837623635303463643030616639356138336239383837313132303136613261393931636631222c22526566756e646564223a66616c73652c2257697468647261776564223a66616c73652c22507265696d616765223a22227d&quot;</span><span class="p">,</span>

        <span class="s2">&quot;totalFee&quot;</span><span class="p">:</span> <span class="mi">9010</span><span class="p">,</span>

        <span class="s2">&quot;txhash&quot;</span><span class="p">:</span> <span class="s2">&quot;0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span><span class="p">,</span>

        <span class="s2">&quot;usedGas&quot;</span><span class="p">:</span> <span class="mi">100000</span>

<span class="p">}</span>





<span class="n">Decode</span> <span class="n">the</span> <span class="n">result</span> <span class="n">field</span>


<span class="n">client</span> <span class="n">htlc</span> <span class="n">decode</span> <span class="o">--</span><span class="n">payload</span> <span class="mh">0x7b225478223a7b2248617368223a22307863353265633833646437633131356434656434396361393038666362626334623164386633643064656430343330656431323463666161376433626335646166222c2244617461223a7b2246726f6d223a22307830613537613237313465313933623761633530343735636536323566326463666234383364373431222c22546f223a22307830303030303030303030303030303030303030303030303030303030303030303030303030313033222c22416d6f756e74223a31303030303030303030302c224163636f756e744e6f6e6365223a302c22466565223a31302c2254696d657374616d70223a302c225061796c6f6164223a2230783030376232323438363137333638346336663633366232323361323233303738363233303636333833323333333433363331333436323632333736353335333436353336363333343633363133323334363636363335333436333333333333313339363636313634333633303337363136363336363436343331333833353339333336313635333533363337333933333337333633323334333836353335363332323263323235343639366436353463366636333662323233613331333533333336333933303336333633333334326332323534366632323361323233303738333236313338333736323336333533303334363336343330333036313636333933353631333833333632333933383338333733313331333233303331333636313332363133393339333136333636333132323764227d2c225369676e6174757265223a7b22536967223a2232666b72352f30714f66767253772b5577483751666932635663594f3447796c6b6c72384a76372b454768696856743654344941742f43504c597238384434506c676b7a78557447305350554251394a564953723441413d227d7d2c22486173684c6f636b223a22307862306638323334363134626237653534653663346361323466663534633333313966616436303761663664643138353933616535363739333736323438653563222c2254696d654c6f636b223a313533363930363633342c22546f223a22307832613837623635303463643030616639356138336239383837313132303136613261393931636631222c22526566756e646564223a66616c73652c2257697468647261776564223a66616c73652c22507265696d616765223a22227d</span>

<span class="p">{</span>

        <span class="s2">&quot;Tx&quot;</span><span class="p">:</span> <span class="p">{</span>

                <span class="s2">&quot;Hash&quot;</span><span class="p">:</span> <span class="s2">&quot;0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span><span class="p">,</span>

                <span class="s2">&quot;Data&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;From&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0a57a2714e193b7ac50475ce625f2dcfb483d741&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;To&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0000000000000000000000000000000000000103&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">10000000000</span><span class="p">,</span>

                        <span class="s2">&quot;AccountNonce&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Fee&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>

                        <span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Payload&quot;</span><span class="p">:</span> <span class="s2">&quot;0x007b22486173684c6f636b223a22307862306638323334363134626237653534653663346361323466663534633333313966616436303761663664643138353933616535363739333736323438653563222c2254696d654c6f636b223a313533363930363633342c22546f223a22307832613837623635303463643030616639356138336239383837313132303136613261393931636631227d&quot;</span>

                <span class="p">},</span>

                <span class="s2">&quot;Signature&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;Sig&quot;</span><span class="p">:</span> <span class="s2">&quot;2fkr5/0qOfvrSw+UwH7Qfi2cVcYO4Gylklr8Jv7+EGhihVt6T4IAt/CPLYr88D4PlgkzxUtG0SPUBQ9JVISr4AA=&quot;</span>

                <span class="p">}</span>

        <span class="p">},</span>

        <span class="s2">&quot;HashLock&quot;</span><span class="p">:</span> <span class="s2">&quot;0xb0f8234614bb7e54e6c4ca24ff54c3319fad607af6dd18593ae5679376248e5c&quot;</span><span class="p">,</span>

        <span class="s2">&quot;TimeLock&quot;</span><span class="p">:</span> <span class="mi">1536906634</span><span class="p">,</span>

        <span class="s2">&quot;To&quot;</span><span class="p">:</span> <span class="s2">&quot;0x2a87b6504cd00af95a83b9887112016a2a991cf1&quot;</span><span class="p">,</span>

        <span class="s2">&quot;Refunded&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>

        <span class="s2">&quot;Withdrawed&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>

        <span class="s2">&quot;Preimage&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>

<span class="p">}</span>


<span class="n">Check</span> <span class="k">if</span> <span class="s2">&quot;To&quot;</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">account</span> <span class="n">address</span> <span class="n">on</span> <span class="n">seele1</span><span class="p">,</span> <span class="n">whether</span> <span class="n">the</span> <span class="n">amount</span> <span class="ow">in</span> <span class="n">the</span> <span class="s2">&quot;Tx&quot;</span> <span class="ow">is</span> <span class="n">agreed</span><span class="p">,</span> <span class="ow">and</span> <span class="n">TimeLock</span><span class="p">,</span> <span class="n">HashLock</span> <span class="n">conforms</span> <span class="n">to</span> <span class="n">the</span> <span class="n">convention</span> <span class="ow">and</span> <span class="n">Refunded</span><span class="p">,</span> <span class="n">withdrawed</span> <span class="ow">is</span> <span class="n">false</span>
</pre></div>
</div>
<div class="section" id="on-seele2">
<h4>On seele2<a class="headerlink" href="#on-seele2" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>6.If Bob validats in 5 conforms to the convention, Bob creates a
contract on seele2, (refer to how Alice creates a contract, Bob does
not need to create a new private key and private key hash, Bob also
needs to produce a lock-up time agreed by both parties with the hash
value of the private key passed over by Alice)</li>
<li>7.Bob checks his balance information for comparison</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="n">getbalance</span> <span class="o">--</span><span class="n">account</span> <span class="mh">0x2a87b6504cd00af95a83b9887112016a2a991cf1</span>

<span class="p">{</span>

        <span class="s2">&quot;Account&quot;</span><span class="p">:</span> <span class="s2">&quot;0x2a87b6504cd00af95a83b9887112016a2a991cf1&quot;</span><span class="p">,</span>

        <span class="s2">&quot;Balance&quot;</span><span class="p">:</span> <span class="mi">1000000000000</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="on-seele1">
<h4>On seele1<a class="headerlink" href="#on-seele1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>8.Alice uses the hash value of the hash time lock system contract
sent by Bob to see if the contract created by Bob on the seele2 meets
the agreement of both parties (refer to step 5).</li>
</ul>
</div>
<div class="section" id="on-seele2-1">
<span id="id1"></span><h4>On seele2<a class="headerlink" href="#on-seele2-1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>9.If the agreement is met, Alice gets the amount on seele2 (refer to
step 10)</li>
</ul>
</div>
<div class="section" id="on-seele1-1">
<span id="id2"></span><h4>On seele1<a class="headerlink" href="#on-seele1-1" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>10.Bob withdraws money according to the hash value of the hash time
lock system contract and private key provided by Alice. For private
key acquisition, refer to step 5 (Note: After Alice withdraws the
amount, Bob operates on on seele2 chain, and Preimage will be found.
The field is changed from an empty string to a value, which is the
private key)</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">After</span> <span class="n">the</span> <span class="n">contract</span> <span class="ow">is</span> <span class="n">packaged</span> <span class="n">into</span> <span class="n">the</span> <span class="n">block</span><span class="p">,</span> <span class="n">check</span> <span class="n">the</span> <span class="n">transaction</span> <span class="n">result</span><span class="o">.</span>
<span class="n">client</span> <span class="n">htlc</span> <span class="n">withdraw</span> <span class="o">--</span><span class="kn">from</span> <span class="nn">.</span>\<span class="n">keyfile</span>\<span class="n">shard1</span><span class="o">-</span><span class="mh">0x2a87b6504cd00af95a83b9887112016a2a991cf1</span>

<span class="o">--</span><span class="n">fee</span> <span class="mi">10</span> <span class="o">--</span><span class="nb">hash</span> <span class="mh">0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf</span> <span class="o">--</span><span class="n">preimage</span> <span class="mh">0xa7e1fe2f00137100321fd2b5970cb681462a72802d0bb2e97988892326aed2c3</span>

<span class="n">Please</span> <span class="nb">input</span> <span class="n">your</span> <span class="n">key</span> <span class="n">file</span> <span class="n">password</span><span class="p">:</span>

<span class="n">account</span> <span class="mh">0x2a87b6504cd00af95a83b9887112016a2a991cf1</span> <span class="n">current</span> <span class="n">nonce</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="n">sending</span> <span class="n">nonce</span><span class="p">:</span> <span class="mi">0</span>

<span class="p">{</span>

        <span class="s2">&quot;Tx&quot;</span><span class="p">:</span> <span class="p">{</span>

                <span class="s2">&quot;Hash&quot;</span><span class="p">:</span> <span class="s2">&quot;0x8d73463d73e0584131afa7e218470b50e8b44449c3634e47fd6053a61febdc47&quot;</span><span class="p">,</span>

                <span class="s2">&quot;Data&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;From&quot;</span><span class="p">:</span> <span class="s2">&quot;0x2a87b6504cd00af95a83b9887112016a2a991cf1&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;To&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0000000000000000000000000000000000000103&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;AccountNonce&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Fee&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>

                        <span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Payload&quot;</span><span class="p">:</span> <span class="s2">&quot;0x017b2248617368223a22307863353265633833646437633131356434656434396361393038666362626334623164386633643064656430343330656431323463666161376433626335646166222c22507265696d616765223a22307861376531666532663030313337313030333231666432623539373063623638313436326137323830326430626232653937393838383932333236616564326333227d&quot;</span>

                <span class="p">},</span>

                <span class="s2">&quot;Signature&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;Sig&quot;</span><span class="p">:</span> <span class="s2">&quot;yiHjETaU+FlYlhduah4sEdXFfiB/AIC0DNFFN875m+RnNN7opZJKvWKfSyppjF0l96yD7oyhS9w8YvgEAhZO+QA=&quot;</span>

                <span class="p">}</span>

        <span class="p">},</span>

        <span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="s2">&quot;0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span><span class="p">,</span>

        <span class="s2">&quot;preimage&quot;</span><span class="p">:</span> <span class="s2">&quot;0xa7e1fe2f00137100321fd2b5970cb681462a72802d0bb2e97988892326aed2c3&quot;</span>

<span class="p">}</span>



<span class="n">client</span> <span class="n">getbalance</span> <span class="o">--</span><span class="n">account</span> <span class="mh">0x2a87b6504cd00af95a83b9887112016a2a991cf1</span>

<span class="p">{</span>

        <span class="s2">&quot;Account&quot;</span><span class="p">:</span> <span class="s2">&quot;0x2a87b6504cd00af95a83b9887112016a2a991cf1&quot;</span><span class="p">,</span>

        <span class="s2">&quot;Balance&quot;</span><span class="p">:</span> <span class="mi">1009999999890</span>

<span class="p">}</span>



 <span class="n">client</span> <span class="n">getreceipt</span> <span class="o">--</span><span class="nb">hash</span> <span class="mh">0x8d73463d73e0584131afa7e218470b50e8b44449c3634e47fd6053a61febd</span> <span class="n">c47</span>

<span class="p">{</span>

        <span class="s2">&quot;contract&quot;</span><span class="p">:</span> <span class="s2">&quot;0x&quot;</span><span class="p">,</span>

        <span class="s2">&quot;failed&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>

        <span class="s2">&quot;poststate&quot;</span><span class="p">:</span> <span class="s2">&quot;0xecdb8dac56e436386637e0daf53e122327ef8cd3d0c883085876f2a9bb888527&quot;</span><span class="p">,</span>

        <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;0x7b225478223a7b2248617368223a22307863353265633833646437633131356434656434396361393038666362626334623164386633643064656430343330656431323463666161376433626335646166222c2244617461223a7b2246726f6d223a22307830613537613237313465313933623761633530343735636536323566326463666234383364373431222c22546f223a22307830303030303030303030303030303030303030303030303030303030303030303030303030313033222c22416d6f756e74223a31303030303030303030302c224163636f756e744e6f6e6365223a302c22466565223a31302c2254696d657374616d70223a302c225061796c6f6164223a2230783030376232323438363137333638346336663633366232323361323233303738363233303636333833323333333433363331333436323632333736353335333436353336363333343633363133323334363636363335333436333333333333313339363636313634333633303337363136363336363436343331333833353339333336313635333533363337333933333337333633323334333836353335363332323263323235343639366436353463366636333662323233613331333533333336333933303336333633333334326332323534366632323361323233303738333236313338333736323336333533303334363336343330333036313636333933353631333833333632333933383338333733313331333233303331333636313332363133393339333136333636333132323764227d2c225369676e6174757265223a7b22536967223a2232666b72352f30714f66767253772b5577483751666932635663594f3447796c6b6c72384a76372b454768696856743654344941742f43504c597238384434506c676b7a78557447305350554251394a564953723441413d227d7d2c22486173684c6f636b223a22307862306638323334363134626237653534653663346361323466663534633333313966616436303761663664643138353933616535363739333736323438653563222c2254696d654c6f636b223a313533363930363633342c22546f223a22307832613837623635303463643030616639356138336239383837313132303136613261393931636631222c22526566756e646564223a66616c73652c2257697468647261776564223a747275652c22507265696d616765223a22307861376531666532663030313337313030333231666432623539373063623638313436326137323830326430626232653937393838383932333236616564326333227d&quot;</span><span class="p">,</span>

        <span class="s2">&quot;totalFee&quot;</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span>

        <span class="s2">&quot;txhash&quot;</span><span class="p">:</span> <span class="s2">&quot;0x8d73463d73e0584131afa7e218470b50e8b44449c3634e47fd6053a61febdc47&quot;</span><span class="p">,</span>

        <span class="s2">&quot;usedGas&quot;</span><span class="p">:</span> <span class="mi">5000</span>

<span class="p">}</span>





<span class="n">client</span> <span class="n">htlc</span> <span class="n">decode</span> <span class="o">--</span><span class="n">payload</span> <span class="mh">0x7b225478223a7b2248617368223a22307863353265633833646437633</span> <span class="mi">131356434656434396361393038666362626334623164386633643064656430343330656431323463666161376433626335646166222</span><span class="n">c2244617461223a7b2246726f6d223a22307830613537613237313465313933623761633530343735636536323566326463666234383364373431222c22546f223a22307830303030303030303030303030303030303030303030303030303030303030303030303030313033222c22416d6f756e74223a31303030303030303030302c224163636f756e744e6f6e6365223a302c22466565223a31302c2254696d657374616d70223a302c225061796c6f6164223a2230783030376232323438363137333638346336663633366232323361323233303738363233303636333833323333333433363331333436323632333736353335333436353336363333343633363133323334363636363335333436333333333333313339363636313634333633303337363136363336363436343331333833353339333336313635333533363337333933333337333633323334333836353335363332323263323235343639366436353463366636333662323233613331333533333336333933303336333633333334326332323534366632323361323233303738333236313338333736323336333533303334363336343330333036313636333933353631333833333632333933383338333733313331333233303331333636313332363133393339333136333636333132323764227d2c225369676e6174757265223a7b22536967223a2232666b72352f30714f66767253772b5577483751666932635663594f3447796c6b6c72384a76372b454768696856743654344941742f43504c597238384434506c676b7a78557447305350554251394a564953723441413d227d7d2c22486173684c6f636b223a22307862306638323334363134626237653534653663346361323466663534633333313966616436303761663664643138353933616535363739333736323438653563222c2254696d654c6f636b223a313533363930363633342c22546f223a22307832613837623635303463643030616639356138336239383837313132303136613261393931636631222c22526566756e646564223a66616c73652c2257697468647261776564223a747275652c22507265696d616765223a22307861376531666532663030313337313030333231666432623539373063623638313436326137323830326430626232653937393838383932333236616564326333227d</span>

<span class="p">{</span>

        <span class="s2">&quot;Tx&quot;</span><span class="p">:</span> <span class="p">{</span>

                <span class="s2">&quot;Hash&quot;</span><span class="p">:</span> <span class="s2">&quot;0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span><span class="p">,</span>

                <span class="s2">&quot;Data&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;From&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0a57a2714e193b7ac50475ce625f2dcfb483d741&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;To&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0000000000000000000000000000000000000103&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">10000000000</span><span class="p">,</span>

                        <span class="s2">&quot;AccountNonce&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Fee&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>

                        <span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Payload&quot;</span><span class="p">:</span> <span class="s2">&quot;0x007b22486173684c6f636b223a22307862306638323334363134626237653534653663346361323466663534633333313966616436303761663664643138353933616535363739333736323438653563222c2254696d654c6f636b223a313533363930363633342c22546f223a22307832613837623635303463643030616639356138336239383837313132303136613261393931636631227d&quot;</span>

                <span class="p">},</span>

                <span class="s2">&quot;Signature&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;Sig&quot;</span><span class="p">:</span> <span class="s2">&quot;2fkr5/0qOfvrSw+UwH7Qfi2cVcYO4Gylklr8Jv7+EGhihVt6T4IAt/CPLYr88D4PlgkzxUtG0SPUBQ9JVISr4AA=&quot;</span>

                <span class="p">}</span>

        <span class="p">},</span>

        <span class="s2">&quot;HashLock&quot;</span><span class="p">:</span> <span class="s2">&quot;0xb0f8234614bb7e54e6c4ca24ff54c3319fad607af6dd18593ae5679376248e5c&quot;</span><span class="p">,</span>

        <span class="s2">&quot;TimeLock&quot;</span><span class="p">:</span> <span class="mi">1536906634</span><span class="p">,</span>

        <span class="s2">&quot;To&quot;</span><span class="p">:</span> <span class="s2">&quot;0x2a87b6504cd00af95a83b9887112016a2a991cf1&quot;</span><span class="p">,</span>

        <span class="s2">&quot;Refunded&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>

        <span class="s2">&quot;Withdrawed&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>

        <span class="s2">&quot;Preimage&quot;</span><span class="p">:</span> <span class="s2">&quot;0xa7e1fe2f00137100321fd2b5970cb681462a72802d0bb2e97988892326aed2c3&quot;</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>11.Fake user retrieves the amount after the lock time</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="n">htlc</span> <span class="n">refund</span> <span class="o">--</span><span class="kn">from</span> <span class="nn">.</span>\<span class="n">keyfile</span>\<span class="n">shard1</span><span class="o">-</span><span class="mh">0x2a87b6504cd00af95a83b9887112016a2a991cf1</span> <span class="o">--</span> <span class="n">fee</span> <span class="mi">10</span> <span class="o">--</span><span class="nb">hash</span> <span class="mh">0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf</span>

<span class="n">Please</span> <span class="nb">input</span> <span class="n">your</span> <span class="n">key</span> <span class="n">file</span> <span class="n">password</span><span class="p">:</span>

<span class="n">account</span> <span class="mh">0x2a87b6504cd00af95a83b9887112016a2a991cf1</span> <span class="n">current</span> <span class="n">nonce</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sending</span> <span class="n">nonce</span><span class="p">:</span> <span class="mi">1</span>

<span class="p">{</span>

        <span class="s2">&quot;Tx&quot;</span><span class="p">:</span> <span class="p">{</span>

                <span class="s2">&quot;Hash&quot;</span><span class="p">:</span> <span class="s2">&quot;0x3eddaa00d9fa8c2980c3dd683625ffa2f37eb66fbdcb9cf37d2b0335d481aa1b&quot;</span><span class="p">,</span>

                <span class="s2">&quot;Data&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;From&quot;</span><span class="p">:</span> <span class="s2">&quot;0x2a87b6504cd00af95a83b9887112016a2a991cf1&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;To&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0000000000000000000000000000000000000103&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;AccountNonce&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>

                        <span class="s2">&quot;Fee&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>

                        <span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Payload&quot;</span><span class="p">:</span> <span class="s2">&quot;0x02c52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span>

                <span class="p">},</span>

                <span class="s2">&quot;Signature&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;Sig&quot;</span><span class="p">:</span> <span class="s2">&quot;K1XWtmj5iDfj4cRnl0QagumdBPl6gTRXIYHTG2do4cdBA/fVFi/KIWGev5Eks1qDJBx/G0Y0gfRzK8InQLHQBwA=&quot;</span>

                <span class="p">}</span>

        <span class="p">},</span>

        <span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="s2">&quot;0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span>

<span class="p">}</span>



<span class="n">client</span> <span class="n">getreceipt</span> <span class="o">--</span><span class="nb">hash</span> <span class="mh">0x3eddaa00d9fa8c2980c3dd683625ffa2f37eb66fbdcb9cf37d2b0335d481a</span> <span class="n">a1b</span>

<span class="p">{</span>

        <span class="s2">&quot;contract&quot;</span><span class="p">:</span> <span class="s2">&quot;0x&quot;</span><span class="p">,</span>

        <span class="s2">&quot;failed&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>

        <span class="s2">&quot;poststate&quot;</span><span class="p">:</span> <span class="s2">&quot;0xa6598a0205040c1acfa1ddc1e4b1f65337e3629d5eb460628f713f773f33da11&quot;</span><span class="p">,</span>

        <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;Failed to refund, only owner is allowed&quot;</span><span class="p">,</span>

        <span class="s2">&quot;totalFee&quot;</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span>

        <span class="s2">&quot;txhash&quot;</span><span class="p">:</span> <span class="s2">&quot;0x3eddaa00d9fa8c2980c3dd683625ffa2f37eb66fbdcb9cf37d2b0335d481aa1b&quot;</span><span class="p">,</span>

        <span class="s2">&quot;usedGas&quot;</span><span class="p">:</span> <span class="mi">5000</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>12.Has already withdrawed and then refunded</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="n">htlc</span> <span class="n">refund</span> <span class="o">--</span><span class="kn">from</span> <span class="nn">.</span>\<span class="n">keyfile</span>\<span class="n">shard1</span><span class="o">-</span><span class="mh">0x0a57a2714e193b7ac50475ce625f2dcfb483d741</span> <span class="o">--</span> <span class="n">fee</span> <span class="mi">10</span> <span class="o">--</span><span class="nb">hash</span> <span class="mh">0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf</span>

<span class="n">Please</span> <span class="nb">input</span> <span class="n">your</span> <span class="n">key</span> <span class="n">file</span> <span class="n">password</span><span class="p">:</span>

<span class="n">account</span> <span class="mh">0x0a57a2714e193b7ac50475ce625f2dcfb483d741</span> <span class="n">current</span> <span class="n">nonce</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">sending</span> <span class="n">nonce</span><span class="p">:</span> <span class="mi">1</span>

<span class="p">{</span>

        <span class="s2">&quot;Tx&quot;</span><span class="p">:</span> <span class="p">{</span>

                <span class="s2">&quot;Hash&quot;</span><span class="p">:</span> <span class="s2">&quot;0x218560f2433bc28dd9bf4fc37ae87df78550dee5a51ef17d2c5d719112dd1eab&quot;</span><span class="p">,</span>

                <span class="s2">&quot;Data&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;From&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0a57a2714e193b7ac50475ce625f2dcfb483d741&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;To&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0000000000000000000000000000000000000103&quot;</span><span class="p">,</span>

                        <span class="s2">&quot;Amount&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;AccountNonce&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>

                        <span class="s2">&quot;Fee&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>

                        <span class="s2">&quot;Timestamp&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>

                        <span class="s2">&quot;Payload&quot;</span><span class="p">:</span> <span class="s2">&quot;0x02c52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span>

                <span class="p">},</span>

                <span class="s2">&quot;Signature&quot;</span><span class="p">:</span> <span class="p">{</span>

                        <span class="s2">&quot;Sig&quot;</span><span class="p">:</span> <span class="s2">&quot;6RjccmTHRLN5uKtND3uO2UQ6Pr/KWHqHjGmJ7W1g8UYtBLpwc988Kmgv0GJyWp3OtG24Zhebpu7fbufzD+R+NQA=&quot;</span>

                <span class="p">}</span>

        <span class="p">},</span>

        <span class="s2">&quot;hash&quot;</span><span class="p">:</span> <span class="s2">&quot;0xc52ec83dd7c115d4ed49ca908fcbbc4b1d8f3d0ded0430ed124cfaa7d3bc5daf&quot;</span>

<span class="p">}</span>



<span class="n">client</span> <span class="n">getreceipt</span> <span class="o">--</span><span class="nb">hash</span> <span class="mh">0x218560f2433bc28dd9bf4fc37ae87df78550dee5a51ef17d2c5d719112dd1</span> <span class="n">eab</span>

<span class="p">{</span>

        <span class="s2">&quot;contract&quot;</span><span class="p">:</span> <span class="s2">&quot;0x&quot;</span><span class="p">,</span>

        <span class="s2">&quot;failed&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>

        <span class="s2">&quot;poststate&quot;</span><span class="p">:</span> <span class="s2">&quot;0x5d7d6d0b73a4cf11db8953b06f9b23a6c16c07acbb64b149c7f1bf5c5e65b63c&quot;</span><span class="p">,</span>

        <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;Failed to refund, receiver have withdrawed&quot;</span><span class="p">,</span>

        <span class="s2">&quot;totalFee&quot;</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span>

        <span class="s2">&quot;txhash&quot;</span><span class="p">:</span> <span class="s2">&quot;0x218560f2433bc28dd9bf4fc37ae87df78550dee5a51ef17d2c5d719112dd1eab&quot;</span><span class="p">,</span>

        <span class="s2">&quot;usedGas&quot;</span><span class="p">:</span> <span class="mi">5000</span>

<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li>13.Already refund, refund again will fail (refer to step 12)</li>
<li>14.The lock time has not passed, refund will fail (refer to step 12)</li>
<li>15.Already withdraw, withdraw again will fail (refer to step 10)</li>
<li>16.Provide a fake private key, withdraw will fail (refer to step 10)</li>
<li>17.Fake recipient initiate a withdraw will fail (refer to step 10)</li>
<li>18.Withdraw after lock time expired will fail (refer to step 10)</li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Command-Line-Options.html" class="btn btn-neutral float-right" title="Command Line Options" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Hash-Time-Lock-Contract.html" class="btn btn-neutral" title="Hash Time Lock Contract" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Seele Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../static/documentation_options.js"></script>
        <script type="text/javascript" src="../static/jquery.js"></script>
        <script type="text/javascript" src="../static/underscore.js"></script>
        <script type="text/javascript" src="../static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
